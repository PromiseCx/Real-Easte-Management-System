{"remainingRequest":"D:\\WebStrom\\TestProject\\project\\06楼盘管理3\\webproject\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\WebStrom\\TestProject\\project\\06楼盘管理3\\webproject\\src\\views\\list\\modules\\StepByStepModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\WebStrom\\TestProject\\project\\06楼盘管理3\\webproject\\src\\views\\list\\modules\\StepByStepModal.vue","mtime":1587193627708},{"path":"D:\\WebStrom\\TestProject\\project\\06楼盘管理3\\webproject\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WebStrom\\TestProject\\project\\06楼盘管理3\\webproject\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\WebStrom\\TestProject\\project\\06楼盘管理3\\webproject\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WebStrom\\TestProject\\project\\06楼盘管理3\\webproject\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgcGljayBmcm9tICdsb2Rhc2gucGljaycNCg0KY29uc3Qgc3RlcEZvcm1zID0gWw0KICAgIFsnbmFtZScsICdkZXNjJ10sDQogICAgWyd0YXJnZXQnLCAndGVtcGxhdGUnLCAndHlwZSddLA0KICAgIFsndGltZScsICdmcmVxdWVuY3knXQ0KXQ0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogJ1N0ZXBCeVN0ZXBNb2RhbCcsDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGxhYmVsQ29sOiB7DQogICAgICAgICAgICAgICAgeHM6IHsgc3BhbjogMjQgfSwNCiAgICAgICAgICAgICAgICBzbTogeyBzcGFuOiA3IH0NCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB3cmFwcGVyQ29sOiB7DQogICAgICAgICAgICAgICAgeHM6IHsgc3BhbjogMjQgfSwNCiAgICAgICAgICAgICAgICBzbTogeyBzcGFuOiAxMyB9DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgdmlzaWJsZTogZmFsc2UsDQogICAgICAgICAgICBjb25maXJtTG9hZGluZzogZmFsc2UsDQogICAgICAgICAgICBjdXJyZW50U3RlcDogMCwNCiAgICAgICAgICAgIG1kbDoge30sDQoNCiAgICAgICAgICAgIGZvcm06IHRoaXMuJGZvcm0uY3JlYXRlRm9ybSh0aGlzKQ0KICAgICAgICB9DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIGVkaXQocmVjb3JkKSB7DQogICAgICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlDQogICAgICAgICAgICBjb25zdCB7DQogICAgICAgICAgICAgICAgZm9ybTogeyBzZXRGaWVsZHNWYWx1ZSB9DQogICAgICAgICAgICB9ID0gdGhpcw0KICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgICAgIHNldEZpZWxkc1ZhbHVlKHBpY2socmVjb3JkLCBbXSkpDQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICBoYW5kbGVOZXh0KHN0ZXApIHsNCiAgICAgICAgICAgIGNvbnN0IHsNCiAgICAgICAgICAgICAgICBmb3JtOiB7IHZhbGlkYXRlRmllbGRzIH0NCiAgICAgICAgICAgIH0gPSB0aGlzDQogICAgICAgICAgICBjb25zdCBjdXJyZW50U3RlcCA9IHN0ZXAgKyAxDQogICAgICAgICAgICBpZiAoY3VycmVudFN0ZXAgPD0gMikgew0KICAgICAgICAgICAgICAgIC8vIHN0ZXBGb3Jtcw0KICAgICAgICAgICAgICAgIHZhbGlkYXRlRmllbGRzKHN0ZXBGb3Jtc1t0aGlzLmN1cnJlbnRTdGVwXSwgKGVycm9ycywgdmFsdWVzKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmICghZXJyb3JzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTdGVwID0gY3VycmVudFN0ZXANCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBsYXN0IHN0ZXANCiAgICAgICAgICAgIHRoaXMuY29uZmlybUxvYWRpbmcgPSB0cnVlDQogICAgICAgICAgICB2YWxpZGF0ZUZpZWxkcygoZXJyb3JzLCB2YWx1ZXMpID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3JzOicsIGVycm9ycywgJ3ZhbDonLCB2YWx1ZXMpDQogICAgICAgICAgICAgICAgaWYgKCFlcnJvcnMpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3ZhbHVlczonLCB2YWx1ZXMpDQogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maXJtTG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdvaycsIHZhbHVlcykNCiAgICAgICAgICAgICAgICAgICAgfSwgMTUwMCkNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpcm1Mb2FkaW5nID0gZmFsc2UNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICBiYWNrd2FyZCgpIHsNCiAgICAgICAgICAgIHRoaXMuY3VycmVudFN0ZXAtLQ0KICAgICAgICB9LA0KICAgICAgICBoYW5kbGVDYW5jZWwoKSB7DQogICAgICAgICAgICAvLyBjbGVhciBmb3JtICYgY3VycmVudFN0ZXANCiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLmN1cnJlbnRTdGVwID0gMA0KICAgICAgICB9DQogICAgfQ0KfQ0K"},{"version":3,"sources":["StepByStepModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"StepByStepModal.vue","sourceRoot":"src/views/list/modules","sourcesContent":["<template>\r\n  <a-modal\r\n    title=\"分步对话框\"\r\n    :width=\"640\"\r\n    :visible=\"visible\"\r\n    :confirmLoading=\"confirmLoading\"\r\n    @cancel=\"handleCancel\"\r\n  >\r\n    <a-spin :spinning=\"confirmLoading\">\r\n      <a-steps :current=\"currentStep\" :style=\"{ marginBottom: '28px' }\" size=\"small\">\r\n        <a-step title=\"基本信息\" />\r\n        <a-step title=\"配置规则属性\" />\r\n        <a-step title=\"设定调度周期\" />\r\n      </a-steps>\r\n      <a-form :form=\"form\">\r\n        <!-- step1 -->\r\n        <div v-show=\"currentStep === 0\">\r\n          <a-form-item label=\"规则名称\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-input v-decorator=\"['name', {rules: [{required: true}]}]\" />\r\n          </a-form-item>\r\n          <a-form-item label=\"规则描述\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-textarea :rows=\"4\" v-decorator=\"['desc', {rules: [{required: true}]}]\"></a-textarea>\r\n          </a-form-item>\r\n        </div>\r\n        <div v-show=\"currentStep === 1\">\r\n          <a-form-item label=\"监控对象\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-select\r\n              v-decorator=\"['target', {initialValue: 0, rules: [{required: true}]}]\"\r\n              style=\"width: 100%\"\r\n            >\r\n              <a-select-option :value=\"0\">表一</a-select-option>\r\n              <a-select-option :value=\"1\">表二</a-select-option>\r\n            </a-select>\r\n          </a-form-item>\r\n\r\n          <a-form-item label=\"规则模板\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-select\r\n              v-decorator=\"['template', { initialValue: 0, rules: [{required: true}]}]\"\r\n              style=\"width: 100%\"\r\n            >\r\n              <a-select-option :value=\"0\">规则模板一</a-select-option>\r\n              <a-select-option :value=\"1\">规则模板二</a-select-option>\r\n            </a-select>\r\n          </a-form-item>\r\n\r\n          <a-form-item label=\"规则类型\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-radio-group\r\n              v-decorator=\"['type', {initialValue: 0, rules: [{required: true}]}]\"\r\n              style=\"width: 100%\"\r\n            >\r\n              <a-radio :value=\"0\">强</a-radio>\r\n              <a-radio :value=\"1\">弱</a-radio>\r\n            </a-radio-group>\r\n          </a-form-item>\r\n        </div>\r\n\r\n        <div v-show=\"currentStep === 2\">\r\n          <a-form-item label=\"开始时间\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-date-picker\r\n              v-decorator=\"['time', {rules: [{ type: 'object', required: true, message: 'Please select time!' }]}]\"\r\n              style=\"width: 100%\"\r\n            />\r\n          </a-form-item>\r\n          <a-form-item label=\"调度周期\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-select\r\n              v-decorator=\"['frequency', { initialValue: 'month', rules: [{required: true}]}]\"\r\n              style=\"width: 100%\"\r\n            >\r\n              <a-select-option value=\"month\">月</a-select-option>\r\n              <a-select-option value=\"week\">周</a-select-option>\r\n            </a-select>\r\n          </a-form-item>\r\n        </div>\r\n        <!-- step1 end -->\r\n      </a-form>\r\n    </a-spin>\r\n    <template slot=\"footer\">\r\n      <a-button key=\"back\" @click=\"backward\" v-if=\"currentStep > 0\" :style=\"{ float: 'left' }\">上一步</a-button>\r\n      <a-button key=\"cancel\" @click=\"handleCancel\">取消</a-button>\r\n      <a-button\r\n        key=\"forward\"\r\n        :loading=\"confirmLoading\"\r\n        type=\"primary\"\r\n        @click=\"handleNext(currentStep)\"\r\n      >{{ currentStep === 2 && '完成' || '下一步' }}</a-button>\r\n    </template>\r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\nimport pick from 'lodash.pick'\r\n\r\nconst stepForms = [\r\n    ['name', 'desc'],\r\n    ['target', 'template', 'type'],\r\n    ['time', 'frequency']\r\n]\r\n\r\nexport default {\r\n    name: 'StepByStepModal',\r\n    data() {\r\n        return {\r\n            labelCol: {\r\n                xs: { span: 24 },\r\n                sm: { span: 7 }\r\n            },\r\n            wrapperCol: {\r\n                xs: { span: 24 },\r\n                sm: { span: 13 }\r\n            },\r\n            visible: false,\r\n            confirmLoading: false,\r\n            currentStep: 0,\r\n            mdl: {},\r\n\r\n            form: this.$form.createForm(this)\r\n        }\r\n    },\r\n    methods: {\r\n        edit(record) {\r\n            this.visible = true\r\n            const {\r\n                form: { setFieldsValue }\r\n            } = this\r\n            this.$nextTick(() => {\r\n                setFieldsValue(pick(record, []))\r\n            })\r\n        },\r\n        handleNext(step) {\r\n            const {\r\n                form: { validateFields }\r\n            } = this\r\n            const currentStep = step + 1\r\n            if (currentStep <= 2) {\r\n                // stepForms\r\n                validateFields(stepForms[this.currentStep], (errors, values) => {\r\n                    if (!errors) {\r\n                        this.currentStep = currentStep\r\n                    }\r\n                })\r\n                return\r\n            }\r\n            // last step\r\n            this.confirmLoading = true\r\n            validateFields((errors, values) => {\r\n                console.log('errors:', errors, 'val:', values)\r\n                if (!errors) {\r\n                    console.log('values:', values)\r\n                    setTimeout(() => {\r\n                        this.confirmLoading = false\r\n                        this.$emit('ok', values)\r\n                    }, 1500)\r\n                } else {\r\n                    this.confirmLoading = false\r\n                }\r\n            })\r\n        },\r\n        backward() {\r\n            this.currentStep--\r\n        },\r\n        handleCancel() {\r\n            // clear form & currentStep\r\n            this.visible = false\r\n            this.currentStep = 0\r\n        }\r\n    }\r\n}\r\n</script>\r\n"]}]}